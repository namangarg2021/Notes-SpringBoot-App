{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/namangarg01/Desktop/Angular Codes/MiniExitAssignment/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nimport { FormControl, FormGroup, Validators } from '@angular/forms';\nimport Swal from 'sweetalert2';\nexport let LoginComponent = class LoginComponent {\n  get username() {\n    return this.Login.get('username');\n  }\n  get password() {\n    return this.Login.get('password');\n  }\n  constructor(productService, router) {\n    this.productService = productService;\n    this.router = router;\n    this.Login = new FormGroup({\n      username: new FormControl('', Validators.required),\n      password: new FormControl('', Validators.required)\n    });\n    this.error = false;\n  }\n  ngOnInit() {}\n  login() {\n    var _this = this,\n      _ref;\n    this.productService.getlogin(this.Login.value.username).subscribe(function (_x) {\n      return (_ref = _ref || _asyncToGenerator(function* (result) {\n        _this.r = result;\n        if (result == null) {\n          _this.error = true;\n        } else {\n          if (_this.r.password == _this.Login.value.password) {\n            var _ref2;\n            _this.productService.generateToken(_this.Login.value).subscribe(function (_x2) {\n              return (_ref2 = _ref2 || _asyncToGenerator(function* (response) {\n                _this.productService.loginUser(response.token);\n                localStorage.setItem('logged', 'true');\n                yield Swal.fire({\n                  title: \"<h5 style='color:green;font-size:35px'>Logging In...Please Wait !</h5>\",\n                  timer: 1000,\n                  showConfirmButton: false,\n                  icon: 'success'\n                });\n                _this.router.navigate(['home']);\n              })).apply(this, arguments);\n            }, error => {\n              _this.error = true;\n            });\n          } else {\n            yield Swal.fire({\n              title: \"<h5 style='color:red;font-size:30px'>Wrong Credentials!!!</h5>\",\n              icon: 'error'\n            });\n            _this.error = true;\n          }\n        }\n      })).apply(this, arguments);\n    });\n  }\n};\nLoginComponent = __decorate([Component({\n  selector: 'app-login',\n  templateUrl: './login.component.html',\n  styleUrls: ['./login.component.css']\n})], LoginComponent);","map":{"version":3,"names":["Component","FormControl","FormGroup","Validators","Swal","LoginComponent","username","Login","get","password","constructor","productService","router","required","error","ngOnInit","login","_this","_ref","getlogin","value","subscribe","_x","_asyncToGenerator","result","r","_ref2","generateToken","_x2","response","loginUser","token","localStorage","setItem","fire","title","timer","showConfirmButton","icon","navigate","apply","arguments","__decorate","selector","templateUrl","styleUrls"],"sources":["C:\\Users\\namangarg01\\Desktop\\Angular Codes\\MiniExitAssignment\\src\\app\\login\\login.component.ts"],"sourcesContent":["import { Component } from '@angular/core';\nimport { FormControl, FormGroup, Validators } from '@angular/forms';\nimport { Router } from '@angular/router';\nimport { ProductService } from '../services/product.service';\nimport Swal from 'sweetalert2';\n@Component({\n  selector: 'app-login',\n  templateUrl: './login.component.html',\n  styleUrls: ['./login.component.css'],\n})\nexport class LoginComponent {\n  Login = new FormGroup({\n    username: new FormControl('', Validators.required),\n    password: new FormControl('', Validators.required),\n  });\n  error = false;\n\n  get username() {\n    return this.Login.get('username');\n  }\n  get password() {\n    return this.Login.get('password');\n  }\n\n  constructor(private productService: ProductService, private router: Router) {}\n\n  ngOnInit(): void {}\n  r: any;\n\n  login() {\n    this.productService\n      .getlogin(this.Login.value.username)\n      .subscribe(async (result) => {\n        this.r = result;\n        if (result == null) {\n          this.error = true;\n        } else {\n          if (this.r.password == this.Login.value.password) {\n            this.productService.generateToken(this.Login.value).subscribe(\n              async (response: any) => {\n                this.productService.loginUser(response.token);\n                localStorage.setItem('logged', 'true');\n                await Swal.fire({\n                  title:\n                    \"<h5 style='color:green;font-size:35px'>Logging In...Please Wait !</h5>\",\n                  timer: 1000,\n                  showConfirmButton: false,\n                  icon: 'success',\n                });\n                this.router.navigate(['home']);\n              },\n              (error) => {\n                this.error = true;\n              }\n            );\n          } else {\n            await Swal.fire({\n              title:\n                \"<h5 style='color:red;font-size:30px'>Wrong Credentials!!!</h5>\",\n              icon: 'error',\n            });\n            this.error = true;\n          }\n        }\n      });\n  }\n}\n"],"mappings":";;AAAA,SAASA,SAAS,QAAQ,eAAe;AACzC,SAASC,WAAW,EAAEC,SAAS,EAAEC,UAAU,QAAQ,gBAAgB;AAGnE,OAAOC,IAAI,MAAM,aAAa;AAMvB,WAAMC,cAAc,GAApB,MAAMA,cAAc;EAOzB,IAAIC,QAAQA,CAAA;IACV,OAAO,IAAI,CAACC,KAAK,CAACC,GAAG,CAAC,UAAU,CAAC;EACnC;EACA,IAAIC,QAAQA,CAAA;IACV,OAAO,IAAI,CAACF,KAAK,CAACC,GAAG,CAAC,UAAU,CAAC;EACnC;EAEAE,YAAoBC,cAA8B,EAAUC,MAAc;IAAtD,KAAAD,cAAc,GAAdA,cAAc;IAA0B,KAAAC,MAAM,GAANA,MAAM;IAblE,KAAAL,KAAK,GAAG,IAAIL,SAAS,CAAC;MACpBI,QAAQ,EAAE,IAAIL,WAAW,CAAC,EAAE,EAAEE,UAAU,CAACU,QAAQ,CAAC;MAClDJ,QAAQ,EAAE,IAAIR,WAAW,CAAC,EAAE,EAAEE,UAAU,CAACU,QAAQ;KAClD,CAAC;IACF,KAAAC,KAAK,GAAG,KAAK;EASgE;EAE7EC,QAAQA,CAAA,GAAU;EAGlBC,KAAKA,CAAA;IAAA,IAAAC,KAAA;MAAAC,IAAA;IACH,IAAI,CAACP,cAAc,CAChBQ,QAAQ,CAAC,IAAI,CAACZ,KAAK,CAACa,KAAK,CAACd,QAAQ,CAAC,CACnCe,SAAS,WAAAC,EAAA;MAAA,QAAAJ,IAAA,GAAAA,IAAA,IAAAK,iBAAA,CAAC,WAAOC,MAAM,EAAI;QAC1BP,KAAI,CAACQ,CAAC,GAAGD,MAAM;QACf,IAAIA,MAAM,IAAI,IAAI,EAAE;UAClBP,KAAI,CAACH,KAAK,GAAG,IAAI;SAClB,MAAM;UACL,IAAIG,KAAI,CAACQ,CAAC,CAAChB,QAAQ,IAAIQ,KAAI,CAACV,KAAK,CAACa,KAAK,CAACX,QAAQ,EAAE;YAAA,IAAAiB,KAAA;YAChDT,KAAI,CAACN,cAAc,CAACgB,aAAa,CAACV,KAAI,CAACV,KAAK,CAACa,KAAK,CAAC,CAACC,SAAS,WAAAO,GAAA;cAAA,QAAAF,KAAA,GAAAA,KAAA,IAAAH,iBAAA,CAC3D,WAAOM,QAAa,EAAI;gBACtBZ,KAAI,CAACN,cAAc,CAACmB,SAAS,CAACD,QAAQ,CAACE,KAAK,CAAC;gBAC7CC,YAAY,CAACC,OAAO,CAAC,QAAQ,EAAE,MAAM,CAAC;gBACtC,MAAM7B,IAAI,CAAC8B,IAAI,CAAC;kBACdC,KAAK,EACH,wEAAwE;kBAC1EC,KAAK,EAAE,IAAI;kBACXC,iBAAiB,EAAE,KAAK;kBACxBC,IAAI,EAAE;iBACP,CAAC;gBACFrB,KAAI,CAACL,MAAM,CAAC2B,QAAQ,CAAC,CAAC,MAAM,CAAC,CAAC;cAChC,CAAC,GAAAC,KAAA,OAAAC,SAAA;YAAA,GACA3B,KAAK,IAAI;cACRG,KAAI,CAACH,KAAK,GAAG,IAAI;YACnB,CAAC,CACF;WACF,MAAM;YACL,MAAMV,IAAI,CAAC8B,IAAI,CAAC;cACdC,KAAK,EACH,gEAAgE;cAClEG,IAAI,EAAE;aACP,CAAC;YACFrB,KAAI,CAACH,KAAK,GAAG,IAAI;;;MAGvB,CAAC,GAAA0B,KAAA,OAAAC,SAAA;IAAA,EAAC;EACN;CACD;AAxDYpC,cAAc,GAAAqC,UAAA,EAL1B1C,SAAS,CAAC;EACT2C,QAAQ,EAAE,WAAW;EACrBC,WAAW,EAAE,wBAAwB;EACrCC,SAAS,EAAE,CAAC,uBAAuB;CACpC,CAAC,C,EACWxC,cAAc,CAwD1B"},"metadata":{},"sourceType":"module","externalDependencies":[]}
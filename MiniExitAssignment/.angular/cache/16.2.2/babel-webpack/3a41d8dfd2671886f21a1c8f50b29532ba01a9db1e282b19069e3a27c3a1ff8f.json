{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/namangarg01/Desktop/Angular Codes/MiniExitAssignment/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nvar _class;\nimport { FormControl, FormGroup, Validators } from '@angular/forms';\nimport Swal from 'sweetalert2';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../services/notes.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@angular/forms\";\nfunction AddNoteComponent_span_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 12);\n    i0.ɵɵtext(1, \"Note is required\");\n    i0.ɵɵelementEnd();\n  }\n}\nexport class AddNoteComponent {\n  get note() {\n    return this.Note.get('note');\n  }\n  constructor(notesService, router) {\n    this.notesService = notesService;\n    this.router = router;\n    this.Note = new FormGroup({\n      note: new FormControl('', [Validators.required, this.maxWordsValidator(500), this.specialCharactersValidator()])\n    });\n    this.error = false;\n  }\n  ngOnInit() {}\n  maxWordsValidator(maxWords) {\n    return control => {\n      const words = control.value ? control.value.trim().split(/\\s+/) : [];\n      return words.length > maxWords ? {\n        maxWords: true\n      } : null;\n    };\n  }\n  specialCharactersValidator() {\n    return control => {\n      const specialCharsPattern = /[!@#$%^&*()_+{}\\[\\]:;<>,.?~\\\\/-]/;\n      const containsSpecialChars = specialCharsPattern.test(control.value);\n      return containsSpecialChars ? {\n        specialChars: true\n      } : null;\n    };\n  }\n  add() {\n    var _this = this,\n      _ref;\n    let note = this.Note.value;\n    console.log(note);\n    note.userId = localStorage.getItem('id');\n    console.log(note);\n    let now = new Date().toLocaleString();\n    //console.log(now.toLocaleDateString() + ' ' + now.toLocaleTimeString());\n    // note.creationTime = now.toLocaleDateString() + now.toLocaleTimeString();\n    //note.creationTime = now;\n    this.notesService.addNote(note).subscribe(function (_x) {\n      return (_ref = _ref || _asyncToGenerator(function* (result) {\n        _this.r = result;\n        console.log(result);\n        if (result == null) {\n          _this.error = true;\n        } else {\n          // if (this.r.password == this.Note.value.password) {\n          //this.notesService.generateToken(this.Note.value).subscribe(\n          //async (response: any) => {\n          // this.notesService.NoteUser(response.token);\n          // localStorage.setItem('logged', 'true');\n          yield Swal.fire({\n            title: \"<h5 style='color:green;font-size:35px'>Note Added!</h5>\",\n            timer: 1000,\n            showConfirmButton: false,\n            icon: 'success'\n          });\n          _this.router.navigate(['home']);\n          //};\n          // (error) => {\n          //   this.error = true;\n          // }\n          // );\n          // } else {\n          //   await Swal.fire({\n          //     title:\n          //       \"<h5 style='color:red;font-size:30px'>Wrong Credentials!!!</h5>\",\n          //     icon: 'error',\n          //   });\n          //   this.error = true;\n          // }\n        }\n      })).apply(this, arguments);\n    });\n  }\n}\n_class = AddNoteComponent;\n_class.ɵfac = function AddNoteComponent_Factory(t) {\n  return new (t || _class)(i0.ɵɵdirectiveInject(i1.NotesService), i0.ɵɵdirectiveInject(i2.Router));\n};\n_class.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: _class,\n  selectors: [[\"app-add-note\"]],\n  decls: 18,\n  vars: 3,\n  consts: [[1, \"form-bg\"], [1, \"container\"], [1, \"row\"], [1, \"fixed-header\"], [1, \"form-container\"], [1, \"form-horizontal\", 3, \"formGroup\", \"ngSubmit\"], [1, \"title\"], [1, \"form-group\"], [\"type\", \"textarea\", \"placeholder\", \"Add a note\", \"id\", \"note\", \"name\", \"note\", \"formControlName\", \"note\", \"rows\", \"8\", \"cols\", \"50\", 1, \"form-control\"], [\"style\", \"color: red\", 4, \"ngIf\"], [1, \"btn\", \"signin\", \"mt-2\", 3, \"disabled\"], [\"href\", \"home\", 2, \"font-size\", \"14px\"], [2, \"color\", \"red\"]],\n  template: function AddNoteComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"div\", 2)(3, \"div\", 3)(4, \"div\", 4)(5, \"form\", 5);\n      i0.ɵɵlistener(\"ngSubmit\", function AddNoteComponent_Template_form_ngSubmit_5_listener() {\n        return ctx.add();\n      });\n      i0.ɵɵelementStart(6, \"h3\", 6);\n      i0.ɵɵtext(7, \"Add a Note\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(8, \"div\", 7)(9, \"textarea\", 8);\n      i0.ɵɵtext(10, \"              \");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵtemplate(11, AddNoteComponent_span_11_Template, 2, 0, \"span\", 9);\n      i0.ɵɵelement(12, \"br\");\n      i0.ɵɵelementStart(13, \"button\", 10);\n      i0.ɵɵtext(14, \" Add \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(15, \"br\");\n      i0.ɵɵelementStart(16, \"a\", 11);\n      i0.ɵɵtext(17, \"Back\");\n      i0.ɵɵelementEnd()()()()()()();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"formGroup\", ctx.Note);\n      i0.ɵɵadvance(6);\n      i0.ɵɵproperty(\"ngIf\", (ctx.note == null ? null : ctx.note.invalid) && (ctx.note == null ? null : ctx.note.touched));\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"disabled\", ctx.Note.invalid);\n    }\n  },\n  dependencies: [i3.NgIf, i4.ɵNgNoValidate, i4.DefaultValueAccessor, i4.NgControlStatus, i4.NgControlStatusGroup, i4.FormGroupDirective, i4.FormControlName],\n  styles: [\"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n});","map":{"version":3,"names":["FormControl","FormGroup","Validators","Swal","i0","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","AddNoteComponent","note","Note","get","constructor","notesService","router","required","maxWordsValidator","specialCharactersValidator","error","ngOnInit","maxWords","control","words","value","trim","split","length","specialCharsPattern","containsSpecialChars","test","specialChars","add","_this","_ref","console","log","userId","localStorage","getItem","now","Date","toLocaleString","addNote","subscribe","_x","_asyncToGenerator","result","r","fire","title","timer","showConfirmButton","icon","navigate","apply","arguments","ɵɵdirectiveInject","i1","NotesService","i2","Router","selectors","decls","vars","consts","template","AddNoteComponent_Template","rf","ctx","ɵɵlistener","AddNoteComponent_Template_form_ngSubmit_5_listener","ɵɵtemplate","AddNoteComponent_span_11_Template","ɵɵelement","ɵɵadvance","ɵɵproperty","invalid","touched"],"sources":["C:\\Users\\namangarg01\\Desktop\\Angular Codes\\MiniExitAssignment\\src\\app\\add-note\\add-note.component.ts","C:\\Users\\namangarg01\\Desktop\\Angular Codes\\MiniExitAssignment\\src\\app\\add-note\\add-note.component.html"],"sourcesContent":["import { Component } from '@angular/core';\nimport {\n  AbstractControl,\n  FormControl,\n  FormGroup,\n  ValidatorFn,\n  Validators,\n} from '@angular/forms';\nimport { Router } from '@angular/router';\nimport { NotesService } from '../services/notes.service';\nimport Swal from 'sweetalert2';\n@Component({\n  selector: 'app-add-note',\n  templateUrl: './add-note.component.html',\n  styleUrls: ['./add-note.component.css'],\n})\nexport class AddNoteComponent {\n  Note = new FormGroup({\n    note: new FormControl('', [\n      Validators.required,\n      this.maxWordsValidator(500),\n      this.specialCharactersValidator(),\n    ]),\n  });\n  error = false;\n\n  get note() {\n    return this.Note.get('note');\n  }\n\n  constructor(private notesService: NotesService, private router: Router) {}\n\n  ngOnInit(): void {}\n  r: any;\n\n  maxWordsValidator(maxWords: number): ValidatorFn {\n    return (control: AbstractControl): { [key: string]: any } | null => {\n      const words = control.value ? control.value.trim().split(/\\s+/) : [];\n      return words.length > maxWords ? { maxWords: true } : null;\n    };\n  }\n  specialCharactersValidator(): ValidatorFn {\n    return (control: AbstractControl): { [key: string]: any } | null => {\n      const specialCharsPattern = /[!@#$%^&*()_+{}\\[\\]:;<>,.?~\\\\/-]/;\n      const containsSpecialChars = specialCharsPattern.test(control.value);\n      return containsSpecialChars ? { specialChars: true } : null;\n    };\n  }\n\n  add() {\n    let note: any = this.Note.value;\n    console.log(note);\n    note.userId = localStorage.getItem('id');\n    console.log(note);\n    let now = new Date().toLocaleString();\n    //console.log(now.toLocaleDateString() + ' ' + now.toLocaleTimeString());\n    // note.creationTime = now.toLocaleDateString() + now.toLocaleTimeString();\n    //note.creationTime = now;\n    this.notesService.addNote(note).subscribe(async (result) => {\n      this.r = result;\n      console.log(result);\n      if (result == null) {\n        this.error = true;\n      } else {\n        // if (this.r.password == this.Note.value.password) {\n        //this.notesService.generateToken(this.Note.value).subscribe(\n        //async (response: any) => {\n        // this.notesService.NoteUser(response.token);\n        // localStorage.setItem('logged', 'true');\n        await Swal.fire({\n          title: \"<h5 style='color:green;font-size:35px'>Note Added!</h5>\",\n          timer: 1000,\n          showConfirmButton: false,\n          icon: 'success',\n        });\n\n        this.router.navigate(['home']);\n        //};\n        // (error) => {\n        //   this.error = true;\n        // }\n        // );\n        // } else {\n        //   await Swal.fire({\n        //     title:\n        //       \"<h5 style='color:red;font-size:30px'>Wrong Credentials!!!</h5>\",\n        //     icon: 'error',\n        //   });\n        //   this.error = true;\n        // }\n      }\n    });\n  }\n}\n","<div class=\"form-bg\">\n  <div class=\"container\">\n    <div class=\"row\">\n      <div class=\"fixed-header\">\n        <div class=\"form-container\">\n          <form [formGroup]=\"Note\" (ngSubmit)=\"add()\" class=\"form-horizontal\">\n            <h3 class=\"title\">Add a Note</h3>\n            <div class=\"form-group\">\n              <textarea\n                class=\"form-control\"\n                type=\"textarea\"\n                placeholder=\"Add a note\"\n                id=\"note\"\n                name=\"note\"\n                formControlName=\"note\"\n                rows=\"8\"\n                cols=\"50\"\n              >\n              </textarea>\n            </div>\n            <span style=\"color: red\" *ngIf=\"note?.invalid && note?.touched\"\n              >Note is required</span\n            >\n            <br />\n            <button class=\"btn signin mt-2\" [disabled]=\"Note.invalid\">\n              Add\n            </button>\n            <br />\n            <a href=\"home\" style=\"font-size: 14px\">Back</a>\n          </form>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}